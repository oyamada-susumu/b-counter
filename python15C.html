<!DOCTYPE html>
<html>
<head>
    <title>15C Assembler</title>
</head>
<body bgcolor="#c0c0c0">
<center>
<table id="memTbl">
<tr>
    <td colspan="6">アセンブリ言語</td>
    <td colspan="2">中央処理装置（CPU）</td>
    <td colspan="2"></td>
    <td colspan="3">主記憶装置（機械語）</td>
</tr>
<tr>
    <td>番地</td><td>ｵﾍﾟｺｰﾄﾞ</td><td>ｵﾍﾟﾗﾝﾄﾞ1</td><td>ｵﾍﾟﾗﾝﾄﾞ2</td><td>選択行</td><td>　</td>
    <td>CPU内部</td><td>値</td>
    <td></td><td></td>
    <td>ｵﾍﾟｺｰﾄﾞ</td><td>ｵﾍﾟﾗﾝﾄﾞ1</td><td>ｵﾍﾟﾗﾝﾄﾞ2</td>
</tr>
<tr>
    <td>0</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="0"></td>
    <td></td><td>ﾌﾟﾛｸﾞﾗﾑｶｳﾝﾀ</td><td><type="text" id="text_program_counter">PC</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>1</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="READ"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="A"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="10"></td>
    <td><input type="radio" name="lineSelect" value="1"></td>
    <td></td><td>命令レジスタ</td><td><type="text" id="text_instraction_register">IR</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>2</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="ADD"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="A"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="11"></td>
    <td><input type="radio" name="lineSelect" value="2"></td>
    <td></td><td>命令読解器</td><td><type="text" id="text_instraction_decoda">ID</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>3</td>  
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="WRITE"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="12"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="A"></td>
    <td><input type="radio" name="lineSelect" value="3"></td> 
    <td></td><td>レジスタA </td><td><type="text" id="text_register_a">RA</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>4</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="DSP"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="12"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="4"></td> 
    <td></td><td>レジスタB</td><td><type="text" id="text_register_b">RB</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>5</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="STOP"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="5"></td> 
    <td></td><td>ﾌﾗｸﾞﾚｼﾞｽﾀZ</td><td><type="text" id="text_flag_register_zero">RZ</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>6</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="6"></td> 
    <td></td><td>演算装置</td><td><type="text" id="text_accumlater">Accumlater</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>7</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="7"></td> 
    <td></td><td><input type="button" id="pushButtonSet" value="セット"></td>
    <td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>8</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="8"></td> 
    <td></td><td><input type="button" id="pushButtonStep" value="1ステップ実行"></td>
    <td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>9</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="9"></td> 
    <td></td><td><input type="button" id="pushButtonRun" value="最後まで実行"></td>
    <td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>10</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="DATA"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="3"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="10"></td>  
    <td></td><td><input type="button" id="pushButtonStop" value="停止"></td>
    <td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>11</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="DATA"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value="5"></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="11"></td> 
    <td></td><td>最大行数</td><td><type="text" id="text_program_length"></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>12</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="12"></td> 
    <td></td>
    <td><type="text" id="text_dsp0"></td>
    <td><type="text" id="text_dsp1"></td>
    <td><type="text" id="text_dsp2"></td>
    <td><type="text" id="text_dsp3"></td>
    <td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>13</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="13"></td>
    <td></td><td>ｵﾍﾟｺｰﾄﾞ</td><td>ｵﾍﾟﾗﾝﾄﾞ1</td><td>ｵﾍﾟﾗﾝﾄﾞ2</td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>14</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="14"></td>
    <td></td>
    <td>
        <select name="opcode" id="opcodeselect">
            <option value="NUL">-----</option>
            <option value="READ">READ</option>
            <option value="WRITE">WRITE</option>
            <option value="ADD">ADD</option>
            <option value="SUB">SUB</option>
            <option value="STOP">STOP</option>
            <option value="JNZ">JNZ</option>
            <option value="DATA">DATA</option>
            <option value="JEZ">JEZ</option>
            <option value="NOP">NOP</option>
            <option value="DSP">DSP</option>
            <option value="JMP">JMP</option>
            <option value="REM">REM</option>
        </select>
    </td> 
    <td>
        <select name="operand1" id="operand1select">
            <option value ="     ">----</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
            <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option>
            <option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option>
            <option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option>
            <option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option>
            <option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option>
            <option value="30">30</option><option value="31">31</option><option value="32">32</option><option value="33">33</option><option value="34">34</option>
            <option value="35">35</option><option value="36">36</option><option value="37">37</option><option value="88">38</option><option value="39">39</option>
            <option value="40">40</option><option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option>
            <option value="45">45</option><option value="46">46</option><option value="47">47</option><option value="48">48</option><option value="49">49</option>
            <option value="50">50</option><option value="51">51</option><option value="52">52</option><option value="53">53</option><option value="54">54</option>
            <option value="55">55</option><option value="56">56</option><option value="57">57</option><option value="58">58</option><option value="59">59</option> 
            <option value="60">60</option><option value="61">61</option><option value="62">62</option><option value="63">63</option><option value="64">64</option>
            <option value="65">65</option><option value="66">66</option><option value="67">67</option><option value="68">68</option><option value="69">69</option>
            <option value="70">70</option><option value="71">71</option><option value="72">72</option><option value="73">73</option><option value="74">74</option>
            <option value="75">75</option><option value="76">76</option><option value="77">77</option><option value="78">78</option><option value="79">79</option>
            <option value="80">80</option><option value="81">81</option><option value="82">82</option><option value="83">83</option><option value="84">84</option>
            <option value="85">85</option><option value="86">86</option><option value="87">87</option><option value="88">88</option><option value="89">89</option>
            <option value="90">90</option><option value="91">91</option><option value="92">92</option><option value="93">93</option><option value="94">94</option>
            <option value="95">95</option><option value="96">96</option><option value="97">97</option><option value="98">98</option><option value="99">99</option>
            <option value="100">100</option><option value="101">101</option><option value="102">102</option><option value="103">103</option><option value="104">104</option>
            <option value="105">105</option><option value="106">106</option><option value="107">107</option><option value="108">108</option><option value="109">109</option>
            <option value="110">110</option><option value="111">111</option><option value="112">112</option><option value="113">113</option><option value="114">114</option>
            <option value="115">115</option><option value="116">116</option><option value="117">117</option><option value="118">118</option><option value="119">119</option>
            <option value="120">120</option><option value="121">121</option><option value="122">122</option><option value="123">123</option><option value="124">124</option>
            <option value="125">125</option><option value="126">126</option><option value="127">127</option><option value="128">128</option><option value="129">129</option>
            <option value="130">130</option><option value="131">131</option><option value="132">132</option><option value="133">133</option><option value="134">134</option>
            <option value="135">135</option><option value="136">136</option><option value="137">137</option><option value="138">138</option><option value="139">139</option>
            <option value="140">140</option><option value="141">141</option><option value="142">142</option><option value="143">143</option><option value="144">144</option>
            <option value="145">145</option><option value="146">146</option><option value="147">147</option><option value="148">148</option><option value="149">149</option>
            <option value="150">150</option><option value="151">151</option><option value="152">152</option><option value="153">153</option><option value="154">154</option>                       
            <option value="155">155</option><option value="156">156</option><option value="157">157</option><option value="158">158</option><option value="159">159</option> 
            <option value="160">160</option><option value="161">161</option><option value="162">162</option><option value="163">163</option><option value="164">164</option>
            <option value="165">165</option><option value="166">166</option><option value="167">167</option><option value="168">168</option><option value="169">169</option>
            <option value="170">170</option><option value="171">171</option><option value="172">172</option><option value="173">173</option><option value="174">174</option>
            <option value="175">175</option><option value="176">176</option><option value="177">177</option><option value="178">178</option><option value="179">179</option>
            <option value="180">180</option><option value="181">181</option><option value="182">182</option><option value="183">183</option><option value="184">184</option>
            <option value="185">185</option><option value="186">186</option><option value="187">187</option><option value="188">188</option><option value="189">189</option>
            <option value="190">190</option><option value="191">191</option><option value="192">192</option><option value="193">193</option><option value="194">194</option>
            <option value="195">195</option><option value="196">196</option><option value="197">197</option><option value="198">198</option><option value="199">199</option>
            <option value="200">200</option><option value="201">201</option><option value="202">202</option><option value="203">203</option><option value="204">204</option>
            <option value="205">205</option><option value="206">206</option><option value="207">207</option><option value="208">208</option><option value="209">209</option>
            <option value="210">210</option><option value="211">211</option><option value="212">212</option><option value="213">213</option><option value="214">214</option>
            <option value="215">215</option><option value="216">216</option><option value="217">217</option><option value="218">218</option><option value="219">219</option>
            <option value="220">220</option><option value="221">221</option><option value="222">222</option><option value="223">223</option><option value="224">224</option>
            <option value="225">225</option><option value="226">226</option><option value="227">227</option><option value="228">228</option><option value="229">229</option>
            <option value="230">230</option><option value="231">231</option><option value="232">232</option><option value="233">233</option><option value="234">234</option>
            <option value="235">235</option><option value="236">236</option><option value="237">237</option><option value="238">238</option><option value="239">239</option>
            <option value="240">240</option><option value="241">241</option><option value="242">242</option><option value="243">243</option><option value="244">244</option>
            <option value="245">245</option><option value="246">246</option><option value="247">247</option><option value="248">248</option><option value="249">249</option>
            <option value="250">250</option><option value="251">251</option><option value="252">252</option><option value="253">253</option><option value="254">254</option>                       
            <option value="255">255</option>
        </select>
    </td>
    <td>
        <select name="operand2" id="operand2select">
            <option value="     ">----</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>            
        </select>
    </td>
    <td><input type="button" id="pushButtonSetline" value="選択行にセット"></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>15</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="15"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>16</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="16"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>17</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="17"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>18</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="18"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>19</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="19"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>20</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="20"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>21</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="21"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>22</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="22"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>23</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="23"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>24</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="24"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>25</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="25"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>26</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="26"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>27</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="27"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>28</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="28"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
<tr>
    <td>29</td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="text" class="inputField" style="border:none" required minlength="0" maxlength="5" size="5" value=""></td>
    <td><input type="radio" name="lineSelect" value="29"></td> 
    <td></td><td></td><td></td><td></td>
    <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
</tr>
</table>
</center>
<script>
// *** SCRIPT START ***
// *** SCOPE IS GLOABAL****
// window.onload = function(){
// memTbl.style.textAlign = "center";
// memTbl.style.verticalAlign = "middle";
// 疑似言語の命令コードを定義する
const NUL=0; const READ=1; const WRITE=2; const ADD=3; const SUB=4; const STOP=5;
const A=6; const B=7; const JNZ=8; const DATA=9; const JEZ=10; const NOP=11; const DSP=12; const JMP=13;
// 注意！nullは変数型の１つ。予約語なので,null,NULL,Nullなどの名前は使わないこと。
// NUL=0とした。意味は空、何もしない、何もない。読み方は「ヌル」。
//        0     1     2      3       4     5      6     7   8   9     10     11    12    13    14    15
const n=["NUL","READ","WRITE","ADD","SUB","STOP","A","B","JNZ","DATA","JEZ","NOP","DSP","JMP","NOP","NOP"];
const n_under=["nul","read","write","add","sub","stop","a","b","jnz","data","jez","dsp","jmp","nop","nop"];
const charUnder=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]
const charUpper=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]
let m=[];       // 主記憶（メモリ）保存領域。すべて数値で表現する。を初期化する。
let mtext=[];   // プログラム（ニーモニック）保存領域。命令とレジスタは文字、番地は数字。を初期化する。
for (let i = 0; i<30; i++){
    m.push[i,0,0,0];
    mtext.push([i,"","",""]);
}
// この下にプログラムやデータを記入する。Python版では、m.append([1, READ, A, 10])とした。
// [c0, c1, c2, c3]　番地　オペコード　オペランド１　オペンランド２の順
m=[];
m.push([0, NUL, NUL, NUL]);
m.push([1, NUL, NUL, NUL]);
m.push([2, NUL, NUL, NUL]);
m.push([3, NUL, NUL, NUL]);
m.push([4, NUL, NUL, NUL]);
m.push([5, NUL, NUL, NUL]);
m.push([6, NUL, NUL, NUL]);
m.push([7, NUL, NUL, NUL]);
m.push([8, NUL, NUL, NUL]);
m.push([9, NUL, NUL, NUL]);
m.push([10,NUL, NUL, NUL]); 
m.push([11,NUL, NUL, NUL]);
m.push([12,NUL, NUL, NUL]);
m.push([13,NUL, NUL, NUL]);
m.push([14,NUL, NUL, NUL]);
m.push([15,NUL, NUL, NUL]);
m.push([16,NUL, NUL, NUL]);
m.push([17,NUL, NUL, NUL]);
m.push([18,NUL, NUL, NUL]);
m.push([19,NUL, NUL, NUL]);
m.push([20,NUL, NUL, NUL]);
m.push([21,NUL, NUL, NUL]);
m.push([22,NUL, NUL, NUL]);
m.push([23,NUL, NUL, NUL]);
m.push([24,NUL, NUL, NUL]);
m.push([25,NUL, NUL, NUL]);
m.push([26,NUL, NUL, NUL]);
m.push([27,NUL, NUL, NUL]);
m.push([28,NUL, NUL, NUL]);
m.push([29,NUL, NUL, NUL]);
//
let p=0;                        // プログラムカウンタに0を代入する。
let rega=0; let regb=0;         // レジスタAに0，レジスタBに0を代入する。
let regf=0;                     // フラグレジスタに0を代入する。 演算結果が0のときに1，それ以外は0
text_program_length.innerHTML=m.length;
displayCPU();
displayMemory();
// *** GLOABAL SCOPE END ***
// *** FUNCTION START ****
function resetCPU(){
    p=0; rega=0; regb=0; regf=0;
    text_program_length.innerHTML=m.length;
    text_accumlater.innerHTML="";
    text_dsp0.innerHTML="";
    text_dsp1.innerHTML="";
    text_dsp2.innerHTML="";
    text_dsp3.innerHTML="";
}
function displayCPU(){
    //text_program_counter.innerHTML ='<input type="number" id="text_program_counter" required minlength="0" maxlength="5" size="5" value="' + "1234" + '">';
    text_program_counter.innerHTML = String(p);
    let textmp1=m[p][1];
    let textmp2=m[p][2];
    let textmp3=m[p][3];
    // if (textmp1=="     ") {let textmp1 ="   ";}
    // if (textmp2==null) {let textmp2 ="   ";}
    // if (textmp3==undefined) {let textmp3 ="   ";}
    text_instraction_register.innerHTML = "["+textmp1+"]["+textmp2+"]["+textmp3+"]";
    text_instraction_decoda.innerHTML = mtext[p][1] + " " + mtext[p][2] + " " + mtext[p][3];
    text_register_a.innerHTML = String(rega);
    text_register_b.innerHTML = String(regb);
    text_flag_register_zero.innerHTML = String(regf); 
}
pushButtonSet.onclick = function() {
    gettextondisplay();
}
function gettextondisplay(){
  // テーブル要素を取得(これは不要) assisted by Chat-GPT 20231017
  // let table = document.getElementById("memTbl");
  // テーブル内の全ての<input>要素を取得
  let inputs = memTbl.getElementsByClassName("inputField");
  // データを格納するための配列を作成
  let inputData = [];
  // 各<input>要素から値を取得し、配列に追加
  for (let i = 0; i < inputs.length; i++) {
    let value = inputs[i].value;
    inputData.push(value);
  }
  // 取得したデータを表示
  // console.log(inputData);
  // Chat-GPT ここまで
  // 小文字の命令を大文字に変換する
  for (let i = 0; i < inputs.length; i++) {
    for (let j = 0; j < n.length; j++) {
        if (inputData[i] == n_under[j]) {
            inputData[i] = n[j];
            }
        }
    }
  // 変換したデータを表示
  // console.log(inputData);
  // 機械語（数値）メモリにセットする
  mtext=[]; m=[];
  let adr=0;
  for (let i = 0; i < inputs.length; i=i+3) {
    let mt0 = adr;
    let mt1 = inputData[i];
    let mt2 = inputData[i+1];
    let mt3 = inputData[i+2];
    mtext.push([mt0,mt1,mt2,mt3]);
    let mx0 = adr;
    let mx1 = inputData[i];
    let mx2 = inputData[i+1];
    let mx3 = inputData[i+2];
    for (let j = 0; j < n.length; j++) {
        if (mx1 == n[j]) {
            mx1 = j;
            }
        if (mx2 == n[j]) {
            mx2 = j;
            }
        if (mx3 == n[j]) {
            mx3 = j;
            }      
    }
    m.push([mx0,mx1,mx2,mx3]);
    adr=adr+1;
}
// console.log(m);
  displayMemory();
  resetCPU();
  displayCPU();
}
pushButtonSetline.onclick = function() {
    let elements = document.getElementsByName('lineSelect');
    let len = elements.length;
    let checkValue = '';
    for (let i = 0; i < len; i++){
        if (elements.item(i).checked){
            checkValue = elements.item(i).value;
        }
    }
    // console.log('選択されているのは ' + checkValue + ' です');
    let line =parseInt(checkValue);
    let opc = opcodeselect.value;
    let op1 = operand1select.value;
    let op2 = operand2select.value;
    // console.log(checkValue+" "+opc+" "+op1+" "+op2 + " です");
    let opcx ='<input type="text" style="border:none" required minlength="0" maxlength="5" size="5" value="' + opc + '">';
    let op1x ='<input type="text" style="border:none" required minlength="0" maxlength="5" size="5" value="' + op1 + '">';
    let op2x ='<input type="text" style="border:none" required minlength="0" maxlength="5" size="5" value="' + op2 + '">';
    // memTbl.rows[line+2].cells[1].value = opc;
    // memTbl.rows[line+2].cells[2].value = op1;
    // memTbl.rows[line+2].cells[3].value = op2;
    memTbl.rows[line+2].cells[1].innerHTML = opcx;
    memTbl.rows[line+2].cells[2].innerHTML = op1x;
    memTbl.rows[line+2].cells[3].innerHTML = op2x;
}
pushButtonRun.onclick = function() {
    while (m[p][1] != STOP) {                   // STOPでない間以下を繰り返す。
        if (pushButtonStop.onclick == true){
            break;
        }
        forwardonestep();
        displayMemory();                
        displayCPU();
        }
    }
pushButtonStep.onclick = function() {
    if (m[p][1] != STOP) { 
        forwardonestep();
        displayMemory();
        displayCPU();
    }
}
function displayMemory(){
    let offsetx=9;
    let offsety=2;
    for(let i=0; i<m.length; i++) {
        for(let j=1; j<4; j++) {            
            if(m[i][j] != null) {
                memTbl.rows[i+offsety].cells[j+offsetx].innerHTML=decimal_to_binary(m[i][j]);
            } else {
                memTbl.rows[i+offsety].cells[j+offsetx].innerHTML=null;
            }
        }
    }
}
function decimal_to_binary(x){
    let d = x;
    let a=[]; let b=[]; let c="";
    if(d < 0) {                     //負ならば補数に変換する。
        d = 2**8 - Math.abs(d);
    }
    for(let i=0; i<8; i++) {
        a[i] = d % 2;
        d = Math.floor(d/2);
    }
    for(let j=0; j<8; j++) {
        b[7-j]=a[j];
    }
    for(let k=0; k<8; k++) {
        c=c+String(b[k]);
    }
    return c;
}
function forwardonestep() {
    // c0=行番号,c1=命令,c2=レジスタ名または番地,c3=レジスタ名または番地
    let c0=m[p][0]; let c1=m[p][1]; let c2=m[p][2]; let c3=m[p][3];
    // if (c1 == NUL) {          // もしNUL命令ならば　←なにもしないのでNUL命令は無視する。
    //    ;                      // なにもしない。     ←これらの行は不要
    //    }                                            ←何もしないので不要
    // ***  １行（１ステップ）だけ命令を実行する ***               
    if (c1 == READ) {         // もしREAD命令ならば
        if (c2 == A) {              // もしレジスタAならば
            rega = m[c3][2];        // 指定番地の値をレジスタAに読み込む。
        } else if (c2 == B) {       // もしレジスタBならば
            regb = m[c3][2];        // 指定番地の値をレジスタBに読み込む。
        } 
    }  
    if (c1 == WRITE) {       // もしWRITE命令ならば
        if (c3 == A) {              // もしレジスタAならば
            m[c2][1] = DATA;        // 指定番地に命令コードDATAの値を書き込む。
            m[c2][2] = rega;        // 指定番地にレジスタAの値を書き込む。
        } else if (c3 == B) {       // もしレジスタBならば
            m[c2][1] = DATA;        // 指定番地に命令コードDATAの値を書き込む。
            m[c2][2] = regb;        // 指定番地にレジスタBの値を書き込む。
        }
    }
    if (c1 == ADD ) {        // もしADD命令ならば
        if (c2 == A) {                          // もしレジスタAならば
            rega=Math.floor(rega);              // レジスタAの値（文字）を整数切り捨てに変換する。
            m[c3][2] = Math.floor(m[c3][2]);    // 指定番地の値（文字）を整数切り捨てに変換する。
            let temp = rega;                    // 演算結果を表示するために演算前のレジスタAの値をtempに保存しておく。
            rega = rega + m[c3][2];             // レジスタAの値に指定番地の値を足したものをレジスタAに代入する。
            flagset(rega);                      // 関数flagsetを呼び出す。
            text_accumlater.innerHTML = temp + "+" + m[c3][2] + "=" + rega;         //演算装置に計算結果を表示する。
        } else if (c2 == B) {                   // もしレジスタBならば
            regb=Math.floor(regb);              
            m[c3][2] = Math.floor(m[c3][2]);
            let temp = regb;
            regb = regb + m[c3][2];             // レジスタBの値に指定番地の値を足したものをレジスタBに代入する。
            flagset(regb);                      // 関数flagsetを呼び出す。
            text_accumlater.innerHTML = temp + "+" + m[c3][2] + "=" + regb;
        }
    }
    if (c1 == SUB) {         // もしSUB命令ならば
        if (c2 == A) {                          // もしレジスタAならば
            rega=Math.floor(rega);
            m[c3][2] = Math.floor(m[c3][2]);
            let temp = rega;
            rega = rega - m[c3][2];             // レジスタAの値から指定番地の値を引いたものをAレジスタに代入する。
            flagset(rega);                      // 関数flagsetを呼び出す。
            text_accumlater.innerHTML = temp + "-" + m[c3][2] + "=" + rega;
        } else if (c2 == B) {                   // もしレジスタBならば
            regb=Math.floor(regb);
            m[c3][2] = Math.floor(m[c3][2]);
            let temp = regb;
            regb = regb - m[c3][2];             // レジスタBの値から指定番地の値を引いたものをBレジスタに代入する。
            flagset(regb);                      // 関数flagsetを呼び出す。
            text_accumlater.innerHTML = temp + "-" + m[c3][2] + "=" + regb;
        }
    } 
    if (c1 == DSP) {           // もしDSP命令ならは、指定番地の内容を10進数で表示する。
        let dsp1=m[c2][1]; let dsp2=m[c2][2]; let dsp3=m[c2][3];
        // if (dsp1 == undefined) { dsp1 = "----"; }
        // if (dsp2 == undefined) { dsp2 = "----"; }
        // if (dsp3 == undefined) { dsp3 = "----"; }
        text_dsp0.innerHTML = c2 + "番地";
        text_dsp1.innerHTML = "[" + dsp1 + "]";
        text_dsp2.innerHTML = "[" + dsp2 + "]";
        text_dsp3.innerHTML = "[" + dsp3 + "]";
    }          
// 直前の演算結果が0ならば、regfに1がセットされている。
// JMP (Jump) 指定番地c2に無条件でジャンプする。
// JNZ (Jump Not Zero) 演算結果が0でなければ指定番地c2にジャンプする。
// JEZ (Jump Equal Zero) 演算結果が0ならば指定番地c2にジャンプする。
    switch(c1) {
        case JMP:
            p = c3;
        case JNZ:
            if (regf = 0) {
                p = c3; }
        case JEZ:        
            if (regf = 1) { 
                p = c3; }
        default:
            p = p + 1;
    }
}
// 演算結果が0ならばフラグレジスタに1を代入する。それ以外は0を代入する。
function flagset(x){
// gloabl regf
    if (x == 0) {
        regf = 1;
    } else {
        regf = 0;
    }
}
// レジスタの内容を表示する関数
function regdump(){
// global p, rega, regb, regf
    window.alert("プログラムカウンタ= "+p+" レジスタA= "+rega+" レジスタB= "+regb+" フラグレジスタ= "+regf)
}
// メモリーの内容を表示する関数（メモリダンプ）
function memdump(x){
// global p, rega, regb, regf
    msg="PC= "+p+" A= "+rega+" B= "+regb+" F= "+regf+"\n";
    for(let i=0; i < x.length; i++ ){
        for(let j=0; j < 4; j++ ){
            msg=msg+x[i][j]+" ";
            }
        msg=msg+"| "
        if ( i%5 == 0 ) {
             msg=msg+"\n" ;    // キーボードの\バックシュラッシュ、￥円マークではない
        }
    }
    window.alert(msg);
}   
</script>
</body>
</html>